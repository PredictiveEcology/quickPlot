<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Thin a polygon using fastshp::thin — thin • quickPlot</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Thin a polygon using fastshp::thin — thin"><meta property="og:description" content="For visualizing, it is sometimes useful to remove points in Spatial* objects.
This will change the geometry, so it is not recommended for computation.
This is similar to rgeos::gSimplify and sf::st_simplify,
but faster than both (see examples) for large shapefiles, particularly if
returnDataFrame is TRUE.
thin will not attempt to preserve topology.
It is strictly for making smaller polygons for the (likely) purpose of visualizing more quickly."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-58633549-4"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-58633549-4');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">quickPlot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/iii-plotting.html">03 Plotting with `quickPlot`</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/PredictiveEcology/quickPlot/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Thin a polygon using <code>fastshp::thin</code></h1>
    <small class="dont-index">Source: <a href="https://github.com/PredictiveEcology/quickPlot/blob/HEAD/R/plotting-helpers.R" class="external-link"><code>R/plotting-helpers.R</code></a></small>
    <div class="hidden name"><code>thin.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For visualizing, it is sometimes useful to remove points in <code>Spatial*</code> objects.
This will change the geometry, so it is not recommended for computation.
This is similar to <code><a href="https://rdrr.io/pkg/rgeos/man/topo-unary-gSimplify.html" class="external-link">rgeos::gSimplify</a></code> and <code>sf::st_simplify</code>,
but faster than both (see examples) for large shapefiles, particularly if
<code>returnDataFrame</code> is <code>TRUE</code>.
<em><code>thin</code> will not attempt to preserve topology.</em>
It is strictly for making smaller polygons for the (likely) purpose of visualizing more quickly.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">thin</span><span class="op">(</span><span class="va">x</span>, <span class="va">tolerance</span>, <span class="va">returnDataFrame</span>, <span class="va">minCoordsToThin</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for SpatialPolygons</span></span>
<span><span class="fu">thin</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  tolerance <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  returnDataFrame <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  minCoordsToThin <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  maxNumPolygons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"quickPlot.maxNumPolygons"</span>, <span class="fl">3000</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for default</span></span>
<span><span class="fu">thin</span><span class="op">(</span><span class="va">x</span>, <span class="va">tolerance</span>, <span class="va">returnDataFrame</span>, <span class="va">minCoordsToThin</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A <code>Spatial*</code> object</p></dd>


<dt>tolerance</dt>
<dd><p>Maximum allowable distance for a point to be removed.</p></dd>


<dt>returnDataFrame</dt>
<dd><p>If <code>TRUE</code>, this will return a list of 3 elements,
<code>xyOrd</code>, <code>hole</code>, and <code>idLength</code>.
If <code>FALSE</code> (default), it will return a <code>SpatialPolygons</code> object.</p></dd>


<dt>minCoordsToThin</dt>
<dd><p>If the number of coordinates is smaller than this number,
then thin will just pass through, though it will take the time required to
calculate how many points there are (which is not <code>NROW(coordinates(x))</code> for
a <code>SpatialPolygon</code>)</p></dd>


<dt>...</dt>
<dd><p>Passed to methods (e.g., <code>maxNumPolygons</code>)</p></dd>


<dt>maxNumPolygons</dt>
<dd><p>For speed, <code>thin</code> can also simply remove some of the
polygons. This is likely only a reasonable thing to do if there are
a lot of polygons being plotted in a small space. Current default is
taken from <code>options('quickPlot.maxNumPolygons')</code>, with a message.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster" class="external-link">raster</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPoints</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="op">-</span><span class="fl">110</span>, <span class="fl">59</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="st">"+init=epsg:4326"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">crsObj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"+proj=tmerc +lat_0=0 +lon_0=-115 +k=0.9992 +x_0=500000 +y_0=0 "</span>,</span></span>
<span class="r-in"><span>                     <span class="st">"+datum=NAD83 +units=m +no_defs +ellps=GRS80 +towgs84=0,0,0"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># make a random polygon -- code adapted from SpaDES.tools::randomPolygon package:</span></span></span>
<span class="r-in"><span>  <span class="va">areaM2</span> <span class="op">&lt;-</span> <span class="fl">1000</span> <span class="op">*</span> <span class="fl">1e4</span> <span class="op">*</span> <span class="fl">1.304</span> <span class="co"># rescale so mean area is close to hectares</span></span></span>
<span class="r-in"><span>  <span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html" class="external-link">spTransform</a></span><span class="op">(</span><span class="va">b</span>, <span class="va">crsObj</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">radius</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">areaM2</span> <span class="op">/</span> <span class="va">pi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">meanX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="va">radius</span></span></span>
<span class="r-in"><span>  <span class="va">meanY</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/coordinates.html" class="external-link">coordinates</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">-</span> <span class="va">radius</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">minX</span> <span class="op">&lt;-</span> <span class="va">meanX</span> <span class="op">-</span> <span class="va">radius</span></span></span>
<span class="r-in"><span>  <span class="va">maxX</span> <span class="op">&lt;-</span> <span class="va">meanX</span> <span class="op">+</span> <span class="va">radius</span></span></span>
<span class="r-in"><span>  <span class="va">minY</span> <span class="op">&lt;-</span> <span class="va">meanY</span> <span class="op">-</span> <span class="va">radius</span></span></span>
<span class="r-in"><span>  <span class="va">maxY</span> <span class="op">&lt;-</span> <span class="va">meanY</span> <span class="op">+</span> <span class="va">radius</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add random noise to polygon</span></span></span>
<span class="r-in"><span>  <span class="va">xAdd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">radius</span> <span class="op">*</span> <span class="fl">0.8</span>, <span class="va">radius</span> <span class="op">*</span> <span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">yAdd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">radius</span> <span class="op">*</span> <span class="fl">0.8</span>, <span class="va">radius</span> <span class="op">*</span> <span class="fl">1.2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">nPoints</span> <span class="op">&lt;-</span> <span class="fl">20</span></span></span>
<span class="r-in"><span>  <span class="va">betaPar</span> <span class="op">&lt;-</span> <span class="fl">0.6</span></span></span>
<span class="r-in"><span>  <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">nPoints</span>, <span class="va">betaPar</span>, <span class="va">betaPar</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">maxX</span> <span class="op">-</span> <span class="va">minX</span><span class="op">)</span> <span class="op">+</span> <span class="va">minX</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">nPoints</span>, <span class="va">betaPar</span>, <span class="va">betaPar</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">maxX</span> <span class="op">-</span> <span class="va">minX</span><span class="op">)</span> <span class="op">+</span> <span class="va">minX</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">nPoints</span> <span class="op">/</span> <span class="fl">2</span>, <span class="va">betaPar</span>, <span class="va">betaPar</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">maxY</span> <span class="op">-</span> <span class="va">meanY</span><span class="op">)</span> <span class="op">+</span> <span class="va">meanY</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">nPoints</span>, <span class="va">betaPar</span>, <span class="va">betaPar</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">maxY</span> <span class="op">-</span> <span class="va">minY</span><span class="op">)</span> <span class="op">+</span> <span class="va">minY</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="fu"><a href="https://rdrr.io/r/base/jitter.html" class="external-link">jitter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Beta.html" class="external-link">rbeta</a></span><span class="op">(</span><span class="va">nPoints</span> <span class="op">/</span> <span class="fl">2</span>, <span class="va">betaPar</span>, <span class="va">betaPar</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="va">meanY</span> <span class="op">-</span> <span class="va">minY</span><span class="op">)</span> <span class="op">+</span> <span class="va">minY</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">Sr1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">Polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">X</span> <span class="op">+</span> <span class="va">xAdd</span>, <span class="va">Y</span> <span class="op">+</span> <span class="va">yAdd</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">Srs1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">Polygons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Sr1</span><span class="op">)</span>, <span class="st">"s1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygons</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">Srs1</span><span class="op">)</span>, <span class="fl">1L</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">crsObj</span></span></span>
<span class="r-in"><span><span class="co"># end of making random polygon</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="clearPlot.html">clearPlot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="Plot.html">Plot</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="thin-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">a</span><span class="op">@</span><span class="va">polygons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">Polygons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">coords</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 41</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="http://www.rforge.net/fastshp" class="external-link">fastshp</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">aThin</span> <span class="op">&lt;-</span> <span class="fu">quickPlot</span><span class="fu">::</span><span class="fu">thin</span><span class="op">(</span><span class="va">a</span>, <span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">NROW</a></span><span class="op">(</span><span class="va">aThin</span><span class="op">@</span><span class="va">polygons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">Polygons</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">coords</span><span class="op">)</span> <span class="co"># fewer</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="Plot.html">Plot</a></span><span class="op">(</span><span class="va">aThin</span><span class="op">)</span> <span class="co"># looks similar</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: fastshp</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘fastshp’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following object is masked from ‘package:quickPlot’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     thin</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Some polygons have been simplified</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>CRS object has comment, which is lost in output; in tests, see</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> https://cran.r-project.org/web/packages/sp/vignettes/CRS_warnings.html</span>
<span class="r-plt img"><img src="thin-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compare -- if you have rgeos</span></span></span>
<span class="r-in"><span><span class="co"># if (require("rgeos")) {</span></span></span>
<span class="r-in"><span><span class="co">#   aSimplify &lt;- gSimplify(a, tol = 200)</span></span></span>
<span class="r-in"><span><span class="co">#   NROW(aSimplify@polygons[[1]]@Polygons[[1]]@coords) # fewer</span></span></span>
<span class="r-in"><span><span class="co">#   Plot(aSimplify)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compare -- if you have sf</span></span></span>
<span class="r-in"><span><span class="co"># if (require("sf")) {</span></span></span>
<span class="r-in"><span><span class="co">#   aSF &lt;- st_simplify(st_as_sf(a), dTolerance = 200)</span></span></span>
<span class="r-in"><span><span class="co">#   # convert to Spatial to see how many coordinates</span></span></span>
<span class="r-in"><span><span class="co">#   aSF2 &lt;- as(aSF, "Spatial")</span></span></span>
<span class="r-in"><span><span class="co">#   NROW(aSF2@polygons[[1]]@Polygons[[1]]@coords) # fewer</span></span></span>
<span class="r-in"><span><span class="co">#   Plot(aSF)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># thin is faster than rgeos::gSimplify and sf::st_simplify on large shapefiles</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="co"># this involves downloading a 9 MB file</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">albertaEcozoneFiles</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Natural_Regions_Subregions_of_Alberta.dbf"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"Natural_Regions_Subregions_of_Alberta.lyr"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"Natural_Regions_Subregions_of_Alberta.prj"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"Natural_Regions_Subregions_of_Alberta.shp.xml"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"Natural_Regions_Subregions_of_Alberta.shx"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"natural_regions_subregions_of_alberta.zip"</span>,</span></span>
<span class="r-in"><span>                           <span class="st">"nsr2005_final_letter.jpg"</span>, <span class="st">"nsr2005_final_letter.pdf"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">albertaEcozoneURL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"https://www.albertaparks.ca/media/429607/"</span>,</span></span>
<span class="r-in"><span>                              <span class="st">"natural_regions_subregions_of_alberta.zip"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">albertaEcozoneFilename</span> <span class="op">&lt;-</span> <span class="st">"Natural_Regions_Subregions_of_Alberta.shp"</span></span></span>
<span class="r-in"><span>  <span class="va">zipFilename</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">albertaEcozoneURL</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">albertaEcozoneURL</span>, destfile <span class="op">=</span> <span class="va">zipFilename</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/unzip.html" class="external-link">unzip</a></span><span class="op">(</span><span class="va">zipFilename</span>, junkpaths <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/shapefile.html" class="external-link">shapefile</a></span><span class="op">(</span><span class="va">albertaEcozoneFilename</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># compare -- if you have rgeos and sf package</span></span></span>
<span class="r-in"><span>  <span class="co"># if (require("sf")) {</span></span></span>
<span class="r-in"><span>  <span class="co">#   aSF &lt;- st_as_sf(a)</span></span></span>
<span class="r-in"><span>  <span class="co"># }</span></span></span>
<span class="r-in"><span>  <span class="co"># if (require("rgeos") &amp;&amp; require("sf")) {</span></span></span>
<span class="r-in"><span>    <span class="co"># thin at 10m</span></span></span>
<span class="r-in"><span>    <span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span>times <span class="op">=</span> <span class="fl">20</span></span></span>
<span class="r-in"><span>                                   , <span class="fu">thin</span><span class="op">(</span><span class="va">a</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   , <span class="fu">thin</span><span class="op">(</span><span class="va">a</span>, <span class="fl">10</span>, returnDataFrame <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># much faster</span></span></span>
<span class="r-in"><span>   <span class="co">#                               , gSimplify(a, 10),</span></span></span>
<span class="r-in"><span>   <span class="co">#                               , st_simplify(aSF, dTolerance = 10))</span></span></span>
<span class="r-in"><span>                                  <span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="co"># Unit: milliseconds</span></span></span>
<span class="r-in"><span>   <span class="co">#                              expr      min   median      max neval cld</span></span></span>
<span class="r-in"><span>   <span class="co"># thin(a, 10)                        989.812 1266.393 1479.879     6  a</span></span></span>
<span class="r-in"><span>   <span class="co"># gSimplify(a, 10   )               4020.349 4211.414 8881.535     6   b</span></span></span>
<span class="r-in"><span>   <span class="co"># st_simplify(aSF, dTolerance = 10) 4087.343 4344.936 4910.299     6   b</span></span></span>
<span class="r-in"><span>  <span class="co">#}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Eliot J B McIntire, Alex M Chubaty.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

